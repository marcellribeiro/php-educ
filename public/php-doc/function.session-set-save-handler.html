<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Define fun&ccedil;&otilde;es de armazenamento de sess&atilde;o &agrave; n&iacute;vel de usu&aacute;rio</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.session-set-cookie-params.html">« session_set_cookie_params</a></li>
      <li style="float: right;"><a href="function.session-start.html">session_start »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="/">PHP-HELP</a></li><li><a href="/php-doc/">Manual</a></li>
    <li><a href="ref.session.html">Fun&ccedil;&otilde;es para Sess&atilde;o</a></li>
    <li>Define fun&ccedil;&otilde;es de armazenamento de sess&atilde;o &agrave; n&iacute;vel de usu&aacute;rio</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.session-set-save-handler" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">session_set_save_handler</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">session_set_save_handler</span> &mdash; <span class="dc-title">Define funções de armazenamento de sessão à nível de usuário</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.session-set-save-handler-description">
  <h3 class="title">Descrição</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>session_set_save_handler</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$open</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$close</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$read</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$write</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$destroy</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$gc</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$create_sid</code><span class="initializer"> = ?</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$validate_sid</code><span class="initializer"> = ?</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$update_timestamp</code><span class="initializer"> = ?</span></span><br>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   A partir do PHP 5.4 é possível registrar o seguinte protótipo:
  </p>
  <div class="methodsynopsis dc-description"><span class="methodname"><strong>session_set_save_handler</strong></span>(<span class="methodparam"><span class="type"><a href="class.sessionhandlerinterface.html" class="type SessionHandlerInterface">SessionHandlerInterface</a></span> <code class="parameter">$sessionhandler</code></span>, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$register_shutdown</code><span class="initializer"> = true</span></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>session_set_save_handler()</strong></span> define, a nível de usuário,
   as funções de armazenamento de sessão que serão usadas para guardar e
   buscar dados associados à uma sessão.  Ela é mais útil
   quando um método de armazenamento diferente do método disponibilizado pelas sessões do PHP
   é preferido. i.e. Armazenar os dados de sessão em um banco de dados.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.session-set-save-handler-parameters">
  <h3 class="title">Parâmetros</h3>
  <p class="para">
   Essa função tem dois protótipos.
   <dl>
    
     <dt>
<code class="parameter">sessionhandler</code></dt>

     <dd>

      <p class="para">
       Uma instância de uma classe implementando
       <span class="interfacename"><a href="class.sessionhandlerinterface.html" class="interfacename">SessionHandlerInterface</a></span>, como
       <span class="classname"><a href="class.sessionhandler.html" class="classname">SessionHandler</a></span>, para registrá-la como manipulador
       de sessão. Apenas a partir do PHP 5.4.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">register_shutdown</code></dt>

     <dd>

      <p class="para">
       Registra <span class="function"><a href="function.session-write-close.html" class="function">session_write_close()</a></span> como uma função
       <span class="function"><a href="function.register-shutdown-function.html" class="function">register_shutdown_function()</a></span>.
      </p>
     </dd>

    
   </dl>


   or

   <dl>
    
     <dt>
<code class="parameter">open(string $savePath, string $sessionName)</code></dt>

     <dd>

      <p class="para">
       O callback open funciona igual um construtor em classes e é
       executado quando a sessão está sendo aberta.  É a primeira função de
       callback executada quando a sessão é iniciada automaticamente ou
       manualmente com <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span>.
       O valor de retorno é <strong><code>true</code></strong> para sucesso, <strong><code>false</code></strong> para falha.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">close()</code></dt>

     <dd>

      <p class="para">
       O callback close funciona igual um destrutor em classes e é
       executado depois que o callback write da sessão for chamado. Ele também é invocado quando a função
       <span class="function"><a href="function.session-write-close.html" class="function">session_write_close()</a></span> é chamada.
       O valor de retorno é <strong><code>true</code></strong> para sucesso, <strong><code>false</code></strong> para falha.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">read(string $sessionId)</code></dt>

     <dd>

      <p class="para">
       O callback <code class="parameter">read</code> sempre deve retornar uma sessão codificada (serializada) no formato
       string ou uma string vazia se não há dados para leitura.
      </p>
      <p class="para">
       Esse callback é chamado internamente pelo PHP quando a sessão inicia ou
       quando a função <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span> é chamada.  Antes que esse callback seja invocado,
       o PHP invocará o callback <code class="parameter">open</code>.
      </p>
      <p class="para">
       O valor que esse callback retorna deve estar exatamente no mesmo formato de serialização que originalmente foi
       passado para armazenamento ao callback <code class="parameter">write</code>.  O valor retornado será
       desserializado automaticamente pelo PHP e usado para preencher a super global <var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var>.
       Mesmo que os dados pareçam similares ao de <span class="function"><a href="function.serialize.html" class="function">serialize()</a></span>, note que é um formato diferente,
       especificado na configuração INI <a href="session.configuration.html#ini.session.serialize-handler" class="link">session.serialize_handler</a>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">write(string $sessionId, string $data)</code></dt>

     <dd>

      <p class="para">
       O callback <code class="parameter">write</code> é chamado quando a sessão precisa ser salva e fechada. Esse
       callback recebe o ID da sessão atual e uma versão serializada da super global <var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var>. O método de
       serialização usado internamente pelo PHP é definido pela configuração INI <a href="session.configuration.html#ini.session.serialize-handler" class="link">session.serialize_handler</a>.
      </p>
      <p class="para">
       Os dados de sessão serializados passado para esse callback devem ser armazenados junto com o ID de sessão passado. Ao buscar
       esses dados, o callback <code class="parameter">read</code> deve retornar exatamente o mesmo valor que foi passado originalmente para
       o callback <code class="parameter">write</code>.
      </p>
      <p class="para">
       Esse callback é invocado quando o PHP é encerrado ou explicitamente quando a função <span class="function"><a href="function.session-write-close.html" class="function">session_write_close()</a></span>
       é chamada.  Note que depois de executar esta função, o PHP executará internamente o callback <code class="parameter">close</code>.
       <blockquote class="note"><p><strong class="note">Nota</strong>: 
        <p class="para">
         O manipulador &quot;write&quot; não é executado enquanto o fluxo de saída não for
         encerrado.  Portanto, saídas de comandos de debug no manipulador &quot;write&quot;
         nunca serão vistas pelo browser.  Se a saída de debug é
         necessária, é recomendado que ela seja escrita
         em arquivo.
        </p>
       </p></blockquote>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">destroy($sessionId)</code></dt>

     <dd>

      <p class="para">
       Esse callback é executado quando uma sessão é destruída com <span class="function"><a href="function.session-destroy.html" class="function">session_destroy()</a></span> ou com
       <span class="function"><a href="function.session-regenerate-id.html" class="function">session_regenerate_id()</a></span> com o parâmetro de destruição definido como <strong><code>true</code></strong>.
       O valor de retorno deve ser <strong><code>true</code></strong> para sucesso, <strong><code>false</code></strong> para falha.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">gc($lifetime)</code></dt>

     <dd>

      <p class="para">
       O callback de limpeza (gc) é invocado pelo PHP, internamente e periodicamente, para
       apagar dados de sessão antiga.  A frequência é controlada por
       <a href="session.configuration.html#ini.session.gc-probability" class="link">session.gc_probability</a> e <a href="session.configuration.html#ini.session.gc-divisor" class="link">session.gc_divisor</a>.
       O valor do parâmetro que é passado para esse callback pode ser definido em <a href="session.configuration.html#ini.session.gc-maxlifetime" class="link">session.gc_maxlifetime</a>.
       O valor de retorno deve ser <strong><code>true</code></strong> para sucesso, <strong><code>false</code></strong> para falha.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">create_sid()</code></dt>

     <dd>

      <p class="para">
       Esse callback é executado quando um novo ID de sessão é necessário. Nenhum
       parâmetro é necessário e o valor de retorno deve ser uma string que
       seja um ID de sessão válido para seu manipulador.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.session-set-save-handler-returnvalues">
  <h3 class="title">Valor Retornado</h3>
  <p class="para">
   Retorna <strong><code>true</code></strong> em caso de sucesso ou <strong><code>false</code></strong> em caso de falha.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.session-set-save-handler-examples">
  <h3 class="title">Exemplos</h3>
  <p class="para">
   <div class="example" id="example-4535">
    <p><strong>Exemplo #1 
     Manipulador de sessão personalizado: veja o código completo na sinópse de <span class="classname"><a href="class.sessionhandlerinterface.html" class="classname">SessionHandlerInterface</a></span>.
    </strong></p>
    <div class="example-contents"><p>
     O código a seguir é para o PHP 5.4.0 ou superior.  Aqui é demonstrado apenas a execução, o código completo pode ser
     visto na sinópse de <span class="classname"><a href="class.sessionhandlerinterface.html" class="classname">SessionHandlerInterface</a></span> no link acima.
    </p></div>
    <div class="example-contents"><p>
     Note que é usado orientação à objetos com <span class="function"><strong>session_set_save_handler()</strong></span> e
     a função de encerramento (register_shutdown) é registrada usando sua respectiva flag.  Isto geralmente é
     aconselhável ao registrar objetos como manipuladores de gravação de sessão.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">MySessionHandler </span><span style="color: #007700">implements </span><span style="color: #0000BB">SessionHandlerInterface<br /></span><span style="color: #007700">{<br />    </span><span style="color: #FF8000">// implementa a interface aqui<br /></span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">$handler </span><span style="color: #007700">= new </span><span style="color: #0000BB">MySessionHandler</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">session_set_save_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$handler</span><span style="color: #007700">, </span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">// proceder para definir e recuperar os valores pela chave de $_SESSION</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-4536">
    <p><strong>Exemplo #2 Manipuladores personalizados de gravação de sessão usando objetos</strong></p>
    <div class="example-contents"><p>
     O código a seguir é para versões do PHP anteriores à 5.4.0.
    </p></div>
    <div class="example-contents"><p>
     O exemplo a seguir apresenta um armazenamento de sessão baseada em arquivos semelhante aos
     manipuladores de gravação de sessão padrões do PHP <code class="parameter">files</code>.  Este
     exemplo poderia ser facilmente estendido para cobrir o armazenamento em banco de dados usando sua
     engine de banco de dados favorita e que seja suportada pelo PHP.
    </p></div>
    <div class="example-contents"><p>
     Note que foi registrada a função <span class="function"><a href="function.session-write-close.html" class="function">session_write_close()</a></span>
     usando <span class="function"><a href="function.register-shutdown-function.html" class="function">register_shutdown_function()</a></span> em versões do PHP anteriores à 5.4.0.
     Isso geralmente é aconselhável ao registrar objetos como manipuladores de gravação de sessão em versões anteriores
     à 5.4.0.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">FileSessionHandler<br /></span><span style="color: #007700">{<br />    private </span><span style="color: #0000BB">$savePath</span><span style="color: #007700">;<br /><br />    function </span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #0000BB">$savePath</span><span style="color: #007700">, </span><span style="color: #0000BB">$sessionName</span><span style="color: #007700">)<br />    {<br />        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">savePath </span><span style="color: #007700">= </span><span style="color: #0000BB">$savePath</span><span style="color: #007700">;<br />        if (!</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">savePath</span><span style="color: #007700">)) {<br />            </span><span style="color: #0000BB">mkdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">savePath</span><span style="color: #007700">, </span><span style="color: #0000BB">0777</span><span style="color: #007700">);<br />        }<br /><br />        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />    }<br /><br />    function </span><span style="color: #0000BB">close</span><span style="color: #007700">()<br />    {<br />        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />    }<br /><br />    function </span><span style="color: #0000BB">read</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">)<br />    {<br />        return (string)@</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">savePath</span><span style="color: #DD0000">/sess_</span><span style="color: #0000BB">$id</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br />    }<br /><br />    function </span><span style="color: #0000BB">write</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">)<br />    {<br />        return </span><span style="color: #0000BB">file_put_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">savePath</span><span style="color: #DD0000">/sess_</span><span style="color: #0000BB">$id</span><span style="color: #DD0000">"</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">) === </span><span style="color: #0000BB">false </span><span style="color: #007700">? </span><span style="color: #0000BB">false </span><span style="color: #007700">: </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />    }<br /><br />    function </span><span style="color: #0000BB">destroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">)<br />    {<br />        </span><span style="color: #0000BB">$file </span><span style="color: #007700">= </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">savePath</span><span style="color: #DD0000">/sess_</span><span style="color: #0000BB">$id</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />        if (</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">)) {<br />            </span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br />        }<br /><br />        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />    }<br /><br />    function </span><span style="color: #0000BB">gc</span><span style="color: #007700">(</span><span style="color: #0000BB">$maxlifetime</span><span style="color: #007700">)<br />    {<br />        foreach (</span><span style="color: #0000BB">glob</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">savePath</span><span style="color: #DD0000">/sess_*"</span><span style="color: #007700">) as </span><span style="color: #0000BB">$file</span><span style="color: #007700">) {<br />            if (</span><span style="color: #0000BB">filemtime</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">) + </span><span style="color: #0000BB">$maxlifetime </span><span style="color: #007700">&lt; </span><span style="color: #0000BB">time</span><span style="color: #007700">() &amp;&amp; </span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">)) {<br />                </span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">);<br />            }<br />        }<br /><br />        return </span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$handler </span><span style="color: #007700">= new </span><span style="color: #0000BB">FileSessionHandler</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">session_set_save_handler</span><span style="color: #007700">(<br />    array(</span><span style="color: #0000BB">$handler</span><span style="color: #007700">, </span><span style="color: #DD0000">'open'</span><span style="color: #007700">),<br />    array(</span><span style="color: #0000BB">$handler</span><span style="color: #007700">, </span><span style="color: #DD0000">'close'</span><span style="color: #007700">),<br />    array(</span><span style="color: #0000BB">$handler</span><span style="color: #007700">, </span><span style="color: #DD0000">'read'</span><span style="color: #007700">),<br />    array(</span><span style="color: #0000BB">$handler</span><span style="color: #007700">, </span><span style="color: #DD0000">'write'</span><span style="color: #007700">),<br />    array(</span><span style="color: #0000BB">$handler</span><span style="color: #007700">, </span><span style="color: #DD0000">'destroy'</span><span style="color: #007700">),<br />    array(</span><span style="color: #0000BB">$handler</span><span style="color: #007700">, </span><span style="color: #DD0000">'gc'</span><span style="color: #007700">)<br />    );<br /><br /></span><span style="color: #FF8000">// a linha a seguir evita comportamentos não esperados ao usar objetos como manipuladores de gravação<br /></span><span style="color: #0000BB">register_shutdown_function</span><span style="color: #007700">(</span><span style="color: #DD0000">'session_write_close'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br /></span><span style="color: #FF8000">// proceder para definir e recuperar valores pela chave de $_SESSION</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.session-set-save-handler-notes">
  <h3 class="title">Notas</h3>
  <div class="warning"><strong class="warning">Aviso</strong>
   <p class="para">
    Ao utilizar objetos como manipuladores de gravação de sessão, é importante registrar a função de
    finalização no PHP para evitar efeitos colaterais não esperados devido à forma como o
    PHP destrói objetos internamente em seu encerramento e que pode impedir que as funções
    <code class="parameter">write</code> e <code class="parameter">close</code> sejam executadas.
    Normalmente, <code class="parameter">&#039;session_write_close&#039;</code> deve ser registrada usando a função
    <span class="function"><a href="function.register-shutdown-function.html" class="function">register_shutdown_function()</a></span>.
   </p>
   <p class="para">
    A partir do PHP 5.4.0 pode ser usado <span class="function"><a href="function.session-register-shutdown.html" class="function">session_register_shutdown()</a></span> ou
    simplesmente a flag &#039;register shutdown&#039; ao invocar
    <span class="function"><strong>session_set_save_handler()</strong></span> usando o método orientado à objetos e passando uma
    instância que implemente <span class="classname"><a href="class.sessionhandlerinterface.html" class="classname">SessionHandlerInterface</a></span>.
   </p>
  </div>
  <div class="warning"><strong class="warning">Aviso</strong>
   <p class="para">
    A partir do PHP 5.0.5 os manipuladores <code class="parameter">write</code> e
    <code class="parameter">close</code> são executados depois da destruição de
    objetos e portanto não podem usar objetos ou lançar exceções.
    Não é possível capturar nem
    exibir o rastro (trace) de exceções e a execução simplesmente será interrompida de forma inesperada.
    Contudo, os destrutores do objeto podem usar sessões.
   </p>
   <p class="para">
    É possível chamar <span class="function"><a href="function.session-write-close.html" class="function">session_write_close()</a></span> do
    destrutor para resolver esse problema de &#039;o ovo e a galinha&#039; mas a forma mais confiável é
    registrar a função de finalização como descrito acima.
   </p>
  </div>
  <div class="warning"><strong class="warning">Aviso</strong>
   <p class="para">
    O diretório de trabalho atual é alterado com algumas SAPIs (Server API) se a sessão for
    fechada na finalização do script. É possível fechar a sessão
    antecipadamente com <span class="function"><a href="function.session-write-close.html" class="function">session_write_close()</a></span>.
   </p>
  </div>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.session-set-save-handler-changelog">
  <h3 class="title">Changelog</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Versão</th>
      <th>Descrição</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>5.5.1</td>
      <td>
       Adicionado o parâmetro opcional <code class="parameter">create_sid</code>.
      </td>
     </tr>

     <tr>
      <td>5.4.0</td>
      <td>
       Adicionado <span class="interfacename"><a href="class.sessionhandlerinterface.html" class="interfacename">SessionHandlerInterface</a></span> para a implementação de manipuladores de sessão e
       <span class="classname"><a href="class.sessionhandler.html" class="classname">SessionHandler</a></span> para expor manipuladores de sessão internos do PHP.
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 seealso" id="refsect1-function.session-set-save-handler-seealso">
  <h3 class="title">Veja Também</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member">
     <a href="session.configuration.html#ini.session.save-handler" class="link">session.save_handler</a>
     (diretiva de configuração)
    </li>
    <li class="member">
     <a href="session.configuration.html#ini.session.serialize-handler" class="link">session.serialize_handler</a>
     (diretiva de configuração)
    </li>
    <li class="member">A <span class="function"><a href="function.register-shutdown-function.html" class="function" rel="rdfs-seeAlso">register_shutdown_function()</a> - Registra uma fun&ccedil;&atilde;o para ser executada ao final da execu&ccedil;&atilde;o</span></li>
    <li class="member">A <span class="function"><a href="function.session-register-shutdown.html" class="function" rel="rdfs-seeAlso">session_register_shutdown()</a> - Fun&ccedil;&atilde;o de finaliza&ccedil;&atilde;o da sess&atilde;o</span> para PHP 5.4.0+</li>
    <li class="member">
     Visite <a href="https://github.com/php/php-src/blob/master/ext/session/tests/save_handler.inc" class="link external">&raquo;&nbsp;save_handler.inc</a>
     para ver uma implementação completamente procedural
    </li>
   </ul>
  </p>
 </div>


</div></div></div></body></html>