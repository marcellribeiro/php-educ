<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Instalado como m&oacute;dulo do Apache</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="security.cgi-bin.shell.html">« Caso 4: Interpretador do PHP fora da &aacute;rvore de diret&oacute;rios do servidor web</a></li>
      <li style="float: right;"><a href="security.sessions.html">Session Security »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="/">PHP-EDUC</a></li><li><a href="/php-doc/">Manual</a></li>
    <li><a href="security.html">Seguran&ccedil;a</a></li>
    <li>Instalado como m&oacute;dulo do Apache</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="security.apache" class="chapter">
   <h1>Instalado como módulo do Apache</h1>

   <p class="simpara">
    Quando o <abbr title="PHP: Hypertext Preprocessor">PHP</abbr> é usado como módulo do Apache, ele herda as permissões
    do usuário do Apache (normalmente as do usuário &quot;nobody&quot;). Isso tem
    vários impactos de segurança e autorização. Por exemplo, se você estiver usando
    o <abbr title="PHP: Hypertext Preprocessor">PHP</abbr> para acessar um banco de dados, a menos que o banco de dados tenha um controle
    de acesso interno, você terá que faz o banco de dados acessível ao usuário
    &quot;nobody&quot;. Isso significa que um script malicioso pode acessar e modificar
    o banco de dados, mesmo sem um usuário e senha. É possível que um web spider
    pode passar em uma página web de administração do banco de dados
    e remover todos os bancos de dados. Você pode se proteger contra isso
    usando autorização do Apache, ou você pode desenvolver
    seu modelo de acesso prório usando LDAP, arquivos <var class="filename">.htaccess</var>, etc. e incluir
    esse código como parte dos seus scripts <abbr title="PHP: Hypertext Preprocessor">PHP</abbr>.
   </p>
   <p class="simpara">
    Normalmente, uma vez que a segurança está estabelecida até esse ponto onde o
    usuário do <abbr title="PHP: Hypertext Preprocessor">PHP</abbr> (no caso, o usuário apache) tem pouco risco atribuído a ele,
    você descobre que o <abbr title="PHP: Hypertext Preprocessor">PHP</abbr> não tem permissão de escrita nos
    diretórios dos usuários. Ou talvez tenha sido proibido de acessar
    ou alterar bancos de dados. Também foi proibido de escrever
    arquivos, bons ou ruins, ou fazer transações de bancos de dados, boas ou ruins.
   </p>
   <p class="simpara">
    Um erro freqüente de segurança feito até esse ponto é permiter ao apache
    permissões de administrador (root), ou aumentar as habilidades do apahce
    de qualquer outra forma.
   </p>
   <p class="simpara">
    Aumentar as permissões do usuário do Apache para a de administrador é
    extremamente perigoso e pode comprometer o sistema inteiro, então sudo&#039;ing,
    chroot&#039;ing, ou então executar como root não deve ser considerados por
    aqueles que não são profissionais em segurança.
   </p>
   <p class="simpara">
    Existem algumas soluções mais simples. Usando a diretiva
    <a href="ini.core.html#ini.open-basedir" class="link">open_basedir</a> pode-se controlar e restringir quais
    diretórios o <abbr title="PHP: Hypertext Preprocessor">PHP</abbr> tem permissão de usar. Você também pode configurar
    area exclusivas para o Apache, restringir todas as atividades web para arquivo
    que não sejam de algum usuário ou do sistema.
   </p>
  </div>
</div></div></body></html>