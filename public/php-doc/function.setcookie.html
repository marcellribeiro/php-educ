<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Envia um cookie</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.pfsockopen.html">« pfsockopen</a></li>
      <li style="float: right;"><a href="function.setrawcookie.html">setrawcookie »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="/">PHP-EDUC</a></li><li><a href="/php-doc/">Manual</a></li>
    <li><a href="ref.network.html">Fun&ccedil;&otilde;es da Network</a></li>
    <li>Envia um cookie</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.setcookie" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">setcookie</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">setcookie</span> &mdash; <span class="dc-title">Envia um cookie</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.setcookie-description">
  <h3 class="title">Descrição</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>setcookie</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code><span class="initializer"> = &quot;&quot;</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$expires_or_options</code><span class="initializer"> = 0</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$path</code><span class="initializer"> = &quot;&quot;</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$domain</code><span class="initializer"> = &quot;&quot;</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">bool</span> <code class="parameter">$secure</code><span class="initializer"> = <strong><code>false</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">bool</span> <code class="parameter">$httponly</code><span class="initializer"> = <strong><code>false</code></strong></span></span><br>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">Assinatura alternativa disponível a partir do PHP 7.3.0 (sem suporte a parâmetros nomeados):</p>
  <div class="methodsynopsis dc-description"><span class="methodname"><strong>setcookie</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>, <span class="methodparam"><span class="type">string</span> <code class="parameter">$value</code><span class="initializer"> = &quot;&quot;</span></span>, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = []</span></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   A função <span class="function"><strong>setcookie()</strong></span> define um cookie para ser enviado juntamente
   com os cabeçalhos HTTP. Como outros cabeçalhos (headers), os cookies devem ser enviados
   <em class="emphasis">antes</em> de qualquer saída do seu script (isso é
   uma restrição do protocolo). O que quer dizer que você deve colocar chamadas a essa função antes de qualquer
   saída, incluindo as tags <code class="literal">&lt;html&gt;</code> e
   <code class="literal">&lt;head&gt;</code> assim como espaços em branco.
  </p>
  <p class="para">
   Uma vez que os cookies foram setados, eles podem ser acessados no próximo carregamento da página 
   através do array <var class="varname"><a href="reserved.variables.cookies.html" class="classname">$_COOKIE</a></var>. 
   Os valores dos cookies também podem existir no 
   <var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var>.
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.setcookie-parameters">
  <h3 class="title">Parâmetros</h3>
  <p class="para">
   A <a href="http://www.faqs.org/rfcs/rfc6265" class="link external">&raquo;&nbsp;RFC 6265</a> fornece a referência
   normativa de como cada parâmetro de <span class="function"><strong>setcookie()</strong></span> 
   é interpretado.
   <dl>
    
     <dt>
<code class="parameter">name</code></dt>

     <dd>

      <p class="para">
       O nome do cookie.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">value</code></dt>

     <dd>

      <p class="para">
       O valor do cookie. Esse valor é guardado no computador do cliente; não
       guarde informação sensível. Supondo que o <code class="parameter">name</code> seja 
       <code class="literal">&#039;nomedocookie&#039;</code>, o valor pode ser lido através de
       <var class="varname"><a href="reserved.variables.cookies.html" class="classname">$_COOKIE['nomedocookie']</a></var>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">expires_or_options</code></dt>

     <dd>

      <p class="para">
       O tempo para o cookie expirar. Esse valor é uma timestamp Unix,
       portanto é o número de segundos desde a época (epoch).
       Um jeito de configurar esse valor é por adicionando o número de segundos que o cookie deve
       durar antes de expirar ao resultado da função <span class="function"><a href="function.time.html" class="function">time()</a></span>.
       Por exemplo, <code class="literal">time()+60*60*24*30</code> irá configurar o cookie
       para expirar em 30 dias.
       Outra opção é usar a função <span class="function"><a href="function.mktime.html" class="function">mktime()</a></span>.
       Se configurado para <code class="literal">0</code> ou omitido, o cookie vai expirar
       no final da sessão (ao navegador fechar).
      </p>
      <p class="para">
       <blockquote class="note"><p><strong class="note">Nota</strong>: 
        <p class="para">
         Você pode ver que o parâmetro <code class="parameter">expires_or_options</code> recebe
         uma timestamp Unix, ao contrário do formato de data <code class="literal">Wdy,
         DD-Mon-YYYY HH:MM:SS GMT</code>, isso se dá porque o PHP faz essa
         conversão internamente.
        </p>
       </p></blockquote>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">path</code></dt>

     <dd>

      <p class="para">
       O caminho no servidor onde o cookie estará disponível. Se configurado
       para <code class="literal">&#039;/&#039;</code>, o cookie estará disponível para todo o
       <code class="parameter">domain</code>. Se configurado para o diretório 
       <code class="literal">&#039;/foo/&#039;</code>, o cookie estará disponível apenas dentro do 
       diretório <code class="literal">/foo/</code> e todos os subdiretórios como
       <code class="literal">/foo/bar</code> do <code class="parameter">domain</code>.
       O valor padrão é o
       diretório atual onde o cookie está sendo configurado.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">domain</code></dt>

     <dd>

      <p class="para">
       O (sub)domínio para qual o cookie estará disponível. Definindo para um
       subdomínio (como <code class="literal">&#039;www.example.com&#039;</code>) deixará o cookie
       disponível para aquele subdomínio e todos os outros sub-domínios abaixo dele
       (exemplo w2.www.example.com). Para deixar o cookie disponível para todo o 
       domínio (incluindo todos os subdomínios dele), simplesmente defina o valor
       para o nome do domínio (<code class="literal">&#039;example.com&#039;</code>, nesse caso).
      </p>
      <p class="para">
       Browsers antigos ainda implementam a 
       <a href="http://www.faqs.org/rfcs/rfc2109" class="link external">&raquo;&nbsp;RFC 2109</a> e podem requerer um
       <code class="literal">.</code> no início para funcionar com todos os subdomínios.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">secure</code></dt>

     <dd>

      <p class="para">
       Indica que o cookie só poderá ser transmitido sob uma conexão segura HTTPS do
       cliente. Quando configurado para <strong><code>true</code></strong>, o cookie será enviado somente
       se uma conexão segura existir. No lado do servidor, fica por conta do 
       programador enviar esse tipo de cookie somente sob uma conexão segura (ex 
       respeitando <var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER["HTTPS"]</a></var>).
       
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">httponly</code></dt>

     <dd>

      <p class="para">
       Quando for <strong><code>true</code></strong> o cookie será acessível somente sob o protocolo HTTP.
       Isso significa que o cookie não será acessível por linguagens de
       script, como JavaScript. É dito que essa configuração pode ajudar a
       reduzir ou identificar roubos de identidade através de ataques do tipo XSS
       (entretanto ela não é suportada por todos os browsers), mas essa informação
       é constantemente discutida. Foi adicionada no PHP 5.2.0.
       <strong><code>true</code></strong> ou <strong><code>false</code></strong>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       Um <span class="type">array</span> associativo onde quaisquer chaves
       <code class="literal">expires</code>, <code class="literal">path</code>, <code class="literal">domain</code>,
       <code class="literal">secure</code>, <code class="literal">httponly</code> e <code class="literal">samesite</code>.
       Se qualquer outra chave estiver presente, um alerta <strong><code>E_WARNING</code></strong>
       é gerado. Os valores têm o mesmo efeito como descrito acima,
       para os parâmetros de mesmo nome. O valor de <code class="literal">samesite</code>
       deve ser <code class="literal">None</code>, <code class="literal">Lax</code>
       ou <code class="literal">Strict</code>.
       Se uma das opções não é informada, os valores padrão são os
       mesmos valores padrão dos parâmetros explícitos. Se
       <code class="literal">samesite</code> for omitido, o atributo SameSite do cookie
       não será atribuído.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.setcookie-returnvalues">
  <h3 class="title">Valor Retornado</h3>
  <p class="para">
   Se existe saída antes da chamada dessa função,
   <span class="function"><strong>setcookie()</strong></span> irá falhar e retornará <strong><code>false</code></strong>. Se a função
   <span class="function"><strong>setcookie()</strong></span> for executada com sucesso, ela retornará <strong><code>true</code></strong>.
   Isso não indica que o usuário aceitou o cookie.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.setcookie-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Versão</th>
       <th>Descrição</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.3.0</td>
       <td>
        Uma assinatura alternativa para suportar o array <code class="parameter">options</code>
        foi adicionado. Essa assinatura também permite configurar o atributo
        SameSite do cookie.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.setcookie-examples">
  <h3 class="title">Exemplos</h3>
  <p class="para">
   Alguns exemplos para seguir de como enviar cookies:
   <div class="example" id="example-4277">
    <p><strong>Exemplo #1 Exemplo de <span class="function"><strong>setcookie()</strong></span> para enviar cookies</strong></p>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$value </span><span style="color: #007700">= </span><span style="color: #DD0000">'alguma coisa de algum lugar'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">, </span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">, </span><span style="color: #0000BB">$value</span><span style="color: #007700">, </span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);  </span><span style="color: #FF8000">/* expira em 1 hora */<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">, </span><span style="color: #0000BB">$value</span><span style="color: #007700">, </span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">, </span><span style="color: #DD0000">"/~rasmus/"</span><span style="color: #007700">, </span><span style="color: #DD0000">".example.com"</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   Note que a porção do valor do cookie será automaticamente codificada com
   urlencode quando você enviar o cookie, e quando ele for recebido, será
   automaticamente decodificado e atribuído a uma variável com o mesmo nome do
   cookie. Se você não quer que isso aconteça, você pode utilizar no lugar a
   função <span class="function"><a href="function.setrawcookie.html" class="function">setrawcookie()</a></span> se você estiver utilizando o PHP
   5. Para ver o conteúdo do nosso cookie de teste em um script, simplesmente
   utilize um dos exemplos abaixo:
  </p>
  <p class="para">
   <div class="informalexample">
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Mostra um cookie individual<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">// Outra maneira de depurar(debug)/testar é vendo todos os cookies<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4278">
    <p><strong>Exemplo #2 Exemplo de <span class="function"><strong>setcookie()</strong></span> para apagar cookies</strong></p>
    <div class="example-contents"><p>
     Quando estiver apagando um cookie, tenha certeza de que a data de
     expiração dele está no passado, para acionar o mecanismo de remoção do navegador.
     O exemplo a seguir mostra como deletar os cookies enviados no exemplo anterior:
    </p></div>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Configura a data de expiração para uma hora atrás<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">, </span><span style="color: #DD0000">""</span><span style="color: #007700">, </span><span style="color: #0000BB">time</span><span style="color: #007700">() - </span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"CookieTeste"</span><span style="color: #007700">, </span><span style="color: #DD0000">""</span><span style="color: #007700">, </span><span style="color: #0000BB">time</span><span style="color: #007700">() - </span><span style="color: #0000BB">3600</span><span style="color: #007700">, </span><span style="color: #DD0000">"/~rasmus/"</span><span style="color: #007700">, </span><span style="color: #DD0000">".example.com"</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4279">
    <p><strong>Exemplo #3 <span class="function"><strong>setcookie()</strong></span> e arrays</strong></p>
    <div class="example-contents"><p>
     Você pode também enviar cookies de array, utilizando a notação de array
     no nome dele. Isso tem o efeito de enviar tantos cookies quantos
     elementos houverem no array, mas quando o cookie for recebido todos os
     valores serão colocados em um array com o nome do cookie:

    </p></div>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// envia os cookies<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"cookie[tres]"</span><span style="color: #007700">, </span><span style="color: #DD0000">"cookietres"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"cookie[dois]"</span><span style="color: #007700">, </span><span style="color: #DD0000">"cookiedois);<br />setcookie("</span><span style="color: #0000BB">cookie</span><span style="color: #007700">[</span><span style="color: #0000BB">um</span><span style="color: #007700">]</span><span style="color: #DD0000">", "</span><span style="color: #0000BB">cookieum</span><span style="color: #DD0000">");<br /><br />// Depois que a página recarregar, mostra eles<br />if (isset(</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">'cookie'])) {<br />    foreach (</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">'cookie'] as </span><span style="color: #0000BB">$nome</span><span style="color: #DD0000"> =&gt; </span><span style="color: #0000BB">$valor</span><span style="color: #DD0000">) {<br />        </span><span style="color: #0000BB">$nome</span><span style="color: #DD0000"> = htmlspecialchars(</span><span style="color: #0000BB">$nome</span><span style="color: #DD0000">);<br />        </span><span style="color: #0000BB">$valor</span><span style="color: #DD0000"> = htmlspecialchars(</span><span style="color: #0000BB">$valor</span><span style="color: #DD0000">);<br />        echo "</span><span style="color: #0000BB">$nome </span><span style="color: #007700">: </span><span style="color: #0000BB">$valor </span><span style="color: #007700">&lt;</span><span style="color: #0000BB">br </span><span style="color: #007700">/&gt;\</span><span style="color: #0000BB">n</span><span style="color: #DD0000">";<br />    }<br />}<br />?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>O exemplo acima produzirá:</p></div>
    <div class="example-contents screen">
     <div class="cdata"><pre>
tres : cookietres
dois : cookiedois
um : cookieum
</pre></div>
    </div>
   </div>
   <blockquote class="note"><p><strong class="note">Nota</strong>: 
    <span class="simpara">
     Utilizar caracteres como <code class="literal">[</code> e <code class="literal">]</code>
     no nome do cookie não é válido conforme o RFC 6265, seção 4, mas deve
     ser suportado por navegadores conforme o RFC 6265, seção 5.
    </span>
   </p></blockquote>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.setcookie-notes">
  <h3 class="title">Notas</h3>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Você pode utilizar o output buffering para enviar a saída antes de chamar essa 
    função, com o custo de toda sua saída ser guardada em buffer no servidor até 
    que você a envie. Você pode fazer isso chamando <span class="function"><a href="function.ob-start.html" class="function">ob_start()</a></span> 
    e <span class="function"><a href="function.ob-end-flush.html" class="function">ob_end_flush()</a></span> em seu script, ou configurando a diretiva
    <code class="literal">output_buffering</code> no seu <var class="filename">php.ini</var> ou arquivos de
    configuração do servidor.

   </p>
  </p></blockquote>
  <p class="para">
   Problemas comuns:
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      Os cookies não estarão disponíveis até o próximo carregamento da página
      a qual o cookie deverá estar visível. Para testar se um cookie foi
      enviado com sucesso, verifique o cookie no próximo carregamento da
      página antes que ele expire. O tempo para expirar é configurado pelo
      parâmetro <code class="parameter">expires_or_options</code>. Uma maneira boa de depurar a
      existência dos cookies é chamando a função <code class="literal">print_r($_COOKIE);</code>.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Os cookies devem ser deletados com os mesmos parâmetros com os quais
      foram configurados. Se o argumento de valor for uma string vazia,
      e todos os outros argumentos forem iguais a chamada anterior de
      setcookie, então o cookie com o nome especificado será deletado do cliente remoto.
      Internamente isso é feito colocando o valor do cookie para <code class="literal">&#039;deleted&#039;</code> e a
      data de expiração para um ano no passado.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Quando você configurar um cookie com o valor <strong><code>false</code></strong> será tentando
      deletar o cookie. Portanto evite utilizar valores booleanos. No lugar,
      utilize <em class="emphasis">0</em> para <strong><code>false</code></strong> e <em class="emphasis">1</em> for <strong><code>true</code></strong>.
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Nomes de cookies podem ser configurados como arrays e estarão disponíves
      para seus scripts PHP como arrays mas cookies separados serão guardados
      no sistema do usuário. Considere utilizar <span class="function"><a href="function.explode.html" class="function">explode()</a></span>
      para enviar um cookie com nomes e valores múltiplos. Não é recomendado o
      uso da função <span class="function"><a href="function.serialize.html" class="function">serialize()</a></span> para esse propósito, pois
      ele pode resultar em furos de segurança.
     </span>
    </li>
   </ul>
  </p>
  <p class="simpara">
   Várias chamadas para a função <span class="function"><strong>setcookie()</strong></span> são feitas na ordem em que são chamadas.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.setcookie-seealso">
  <h3 class="title">Veja Também</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.header.html" class="function" rel="rdfs-seeAlso">header()</a> - Send a raw HTTP header</span></li>
    <li class="member"><span class="function"><a href="function.setrawcookie.html" class="function" rel="rdfs-seeAlso">setrawcookie()</a> - Send a cookie without urlencoding the cookie value</span></li>
    <li class="member"><a href="features.cookies.html" class="link">Seção de cookies</a></li>
    <li class="member"><a href="http://www.faqs.org/rfcs/rfc6265" class="link external">&raquo;&nbsp;RFC 6265</a></li>
    <li class="member"><a href="http://www.faqs.org/rfcs/rfc2109" class="link external">&raquo;&nbsp;RFC 2109</a></li>
   </ul>
  </p>
 </div>


</div></div></div></body></html>